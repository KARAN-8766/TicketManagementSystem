@using System.Security.Claims
@model TicketHandler.core.Userdata

@{
    var userrole = Context.User.FindFirst(ClaimTypes.Role)?.Value;
}

<div class="d-flex justify-content-center align-items-center" style="min-height: 80vh;">
    <div class="card shadow border-0 rounded-4 p-4" style="width: 400px; background-color: #ffffff;">
        
        <!-- Profile Image -->
        <div class="text-center mb-4">
            <div class="rounded-circle overflow-hidden mx-auto shadow-sm border" 
                 style="width: 110px; height: 110px;">
                @{
                    if (userrole == "User")
                    {
                        <img src="~/css/User.jpg" alt="Profile Image"
                             class="img-fluid w-100 h-100" style="object-fit: cover;">
                    }
                    else if (userrole == "Agent")
                    {
                        <img src="~/css/Agent2.jpg" alt="Profile Image"
                             class="img-fluid w-100 h-100" style="object-fit: cover;">
                    }
                    else
                    {
                        <img src="~/css/Admin 2.jpg" alt="Profile Image"
                             class="img-fluid w-100 h-100" style="object-fit: cover;">
                    }
                }
            </div>
        </div>

        <!-- User Info -->
        <div class="text-center mb-3">
            <h4 class="fw-semibold text-dark mb-1">@Model.UserName</h4>
            <p class="text-muted mb-1">@Model.Email</p>
            <span class="badge bg-primary">@Model.Role</span>
        </div>

        <hr class="text-secondary my-3" />

        <!-- Stats -->
        <div class="text-center mb-4">
            <h6 class="text-secondary mb-1">Total Complaints</h6>
            <h4 class="fw-bold text-dark">@ViewBag.ComplaintCount</h4>
        </div>

        <!-- Button -->
        <div class="text-center">
            <a asp-controller="Userdatas" asp-action="Edit" asp-route-id="@Model.UserId" 
               class="btn btn-primary px-4">Edit Profile</a>
        </div>
    </div>
</div>

